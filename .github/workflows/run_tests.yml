name: Python Unittests CI
on:
  pull_request:
    branches: [ main ]

jobs:
  build:
    name: build
    runs-on: ubuntu-latest
    steps:
    - name: Check out code
      uses: actions/checkout@v3
    - name: Build docker images
      run: docker build -t "cuvis_ai" .
    - name: Run docker container
      run: docker run --name "test-container" cuvis_ai
    - name: Enter container through entrypoint script
      run: docker run --entrypoint=/bin/bash -c "/bin/bash /install/cuvis.ai/entrypoint.sh"
    # - name: Run tests
    # run: docker run -it -v $PWD:/srv -w/srv local make test




# inputs:
#   who-to-greet:  # id of input
#     description: 'Who to greet'
#     required: true
#     default: 'World'
# outputs:
#   time: # id of output
#     description: 'The time we greeted you'
# runs:
#   using: 'docker'
#   image: 'Dockerfile'
#   args:
#     - ${{ inputs.who-to-greet }}

# jobs:
#   build:

#     runs-on: ubuntu-latest

#     steps:
#     - uses: actions/checkout@v2

#     - name: Set up Python 3.10
#       uses: actions/setup-python@v2
#       with:
#         python-version: '3.10'

#     - name: Install dependencies
#       run: |
#         python -m pip install --upgrade pip
#         pip install -r requirements.txt

#     - name: Run unittests
#       run: |
#         python -m unittest discover